@page "/User/Index"
@inject CharacterService CharacterService
@inject AuthService AuthService

<MudText Typo="Typo.h4">Lista de Personagens</MudText>

<MudTable Items="Players" Dense="true" Hover="true">
    <HeaderContent>
        <MudTh>Nome</MudTh>
        <MudTh>Nível</MudTh>
        <MudTh>Saúde</MudTh>
        <MudTh>Online</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd>@context.Name</MudTd>
        <MudTd>@context.Level</MudTd>
        <MudTd>@context.Health / @context.MaxHealth</MudTd>
        <MudTd>@(context.Online ? "Sim" : "Não")</MudTd>
    </RowTemplate>
</MudTable>


@code {
    private List<Player>? Players;

    protected override async Task OnInitializedAsync()
    {
        var UserId = await AuthService.GetUserId();
        Players = await CharacterService.GetCharacters(UserId);
    }
}
